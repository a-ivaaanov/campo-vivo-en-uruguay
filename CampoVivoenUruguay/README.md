# CampoVivoenUruguay

Система для сбора и мониторинга объявлений о продаже земельных участков в Уругвае с отправкой результатов в Telegram.

## Основные возможности

- Парсинг объявлений с MercadoLibre и InfoCasas
- Извлечение детальной информации о каждом объявлении
- Распознавание коммуникаций и зонирования из описаний
- Фильтрация дубликатов по URL, контенту и другим характеристикам
- Отправка новых объявлений в Telegram канал
- Умная ротация прокси для обхода блокировок

## Структура проекта

```
CampoVivoenUruguay/
├── app/
│   ├── parsers/                # Парсеры для разных сайтов
│   │   ├── mercadolibre.py     # Парсер MercadoLibre
│   │   └── infocasas.py        # Парсер InfoCasas
│   ├── utils/                  # Утилиты
│   │   ├── duplicate_checker.py # Проверка дубликатов
│   │   └── proxy_manager.py    # Менеджер прокси
│   ├── models.py               # Модели данных (Pydantic)
│   ├── proxy_rotator.py        # Ротация прокси
│   ├── telegram_sender.py      # Отправка сообщений в Telegram
│   └── main.py                 # Основной модуль
├── config/                     # Конфигурационные файлы
│   └── proxies.json            # Список прокси
├── results/                    # Директория для результатов
├── logs/                       # Директория для логов
├── run.py                      # Скрипт для запуска парсеров
└── .env                        # Переменные окружения
```

## Настройка проекта

1. Установите зависимости:

```
pip install -r requirements.txt
```

2. Установите Playwright:

```
playwright install
```

3. Создайте файл `.env` на основе `.env.example`:

```
cp .env.example .env
```

4. Настройте `.env` файл с вашими параметрами поиска и Telegram-ботом

5. Настройте прокси в `config/proxies.json`

## Запуск

### Базовое использование

```
python run.py
```

### Запуск с параметрами

```
python run.py --parser mercadolibre --pages 10 --details
```

Параметры:
- `--parser`: Выбор парсера (`mercadolibre` или `infocasas`)
- `--pages`: Количество страниц для обработки
- `--details`: Включить получение детальной информации
- `--headless`: Запуск в фоновом режиме (без GUI)

### Запуск через cron

Для регулярного запуска можно настроить cron-задачу:

```
0 */6 * * * cd /path/to/CampoVivoenUruguay && python run.py >> logs/cron.log 2>&1
```

## Прокси

Для работы с уругвайским рынком рекомендуется использовать прокси с IP из Уругвая. Формат конфигурации прокси:

```json
{
  "proxies": [
    {
      "id": "proxy1",
      "server": "123.123.123.123:8080",
      "user_pattern": "username",
      "password": "password",
      "country": "UY",
      "type": "http"
    }
  ]
}
```

## Логирование

Логи сохраняются в директории `logs/`. Уровень логирования настраивается в `.env` файле.

## Поддержка и улучшения

Текущая версия включает поддержку MercadoLibre и InfoCasas с возможностью добавления других источников в будущем. 